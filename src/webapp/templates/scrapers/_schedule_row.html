{% set name = scraper.scraper_name %}
{% set display_name = scraper.display_name or name %}
{% set last_run_str = scraper.last_run|string %}
{% set next_run_str = scraper.next_run|string %}

<div id="schedule-{{ name }}"
    data-schedule-card
    class="app-card app-card-hover p-5 flex flex-col gap-3 {% if scraper.enabled %}ring-1 ring-brand/25{% endif %}">
    <div class="flex items-start justify-between gap-3">
        <div class="min-w-0">
            <h3 class="text-sm font-semibold text-white truncate">{{ display_name }}</h3>
            <div class="mt-1 flex flex-wrap gap-x-4 gap-y-1 text-xs text-slate-400">
                <div>
                    <span class="uppercase tracking-widest text-[10px] text-slate-500">Last run</span>
                    <span class="ml-1 text-slate-300">
                        {% if scraper.last_run %}
                        {{ last_run_str[:16].replace('T', ' ') }}
                        {% else %}
                        Never
                        {% endif %}
                    </span>
                </div>
                <div>
                    <span class="uppercase tracking-widest text-[10px] text-slate-500">Next run</span>
                    <span class="ml-1 text-slate-300">
                        {% if scraper.next_run %}
                        {{ next_run_str[:16].replace('T', ' ') }}
                        {% elif scraper.enabled %}
                        <span class="text-amber-200">Pending</span>
                        {% else %}
                        -
                        {% endif %}
                    </span>
                </div>
            </div>
        </div>

        <label class="inline-flex items-center gap-2 cursor-pointer select-none">
            <input type="checkbox"
                name="enabled_{{ name }}"
                {% if scraper.enabled %}checked{% endif %}
                class="sr-only peer">
            <div class="relative w-10 h-6 rounded-full bg-white/10 border border-white/10 peer-checked:bg-brand/70 peer-checked:border-brand/60 transition-colors">
                <div class="absolute top-0.5 left-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform peer-checked:translate-x-4"></div>
            </div>
            <span class="text-sm font-medium text-slate-300 peer-checked:text-white">Enabled</span>
        </label>
    </div>

    <div class="flex items-center gap-3">
        <label for="interval_{{ name }}" class="text-[11px] uppercase tracking-widest text-slate-400">Interval</label>
        <input id="interval_{{ name }}" type="number"
            name="interval_{{ name }}"
            value="{{ scraper.interval_minutes or 60 }}"
            min="1"
            max="10080"
            class="w-28 px-2 py-1.5 text-sm app-input rounded-md focus:outline-none focus:ring-2 focus:ring-brand/60">
        <span class="text-xs text-slate-400">minutes</span>
    </div>
</div>
